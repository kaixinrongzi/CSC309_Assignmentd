{"ast":null,"code":"var _jsxFileName = \"/Users/alberthuang/Documents/University/csc309-p2/Frontend/src/login.js\",\n  _s = $RefreshSig$();\nimport './css/style1.css';\nimport './css/style2.css';\nimport './css/index.css';\nimport './css/bulma/bulma.css';\nimport './css/bulma/bulma.css.map';\nimport './css/bulma/bulma.min.css';\nimport './css/bulma/bulma-rtl.css';\nimport './css/bulma/bulma-rtl.css.map';\nimport './css/bulma/bulma-rtl.min.css';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LogIn() {\n  _s();\n  const [isLogin, setIsLogin] = useState(false);\n  const [token, setToken] = useState('');\n  const navigate = useNavigate();\n  console.log(\"loginlalala\", isLogin);\n  const loginHandler = e => {\n    e.preventDefault();\n    console.log(\"handle login\");\n    var myForm = $(e.target.closest('form'));\n    axios.post('http://localhost:8000/accounts/token/api/', {\n      // Data to be sent to the server\n      username: myForm.find('#username').val(),\n      password: myForm.find('#password').val()\n    }\n\n    //            ,{\n    //                headers: {\"Authorization\": 'Bearer '+\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjgyMDQ2MTc5LCJpYXQiOjE2ODIwNDU4NzksImp0aSI6IjI3NmZiMGZmNDA2ZTQzODA5ZDg2NzQxMzQyNzg1OWNlIiwidXNlcl9pZCI6MTd9._jgPlwjsSqEeN_9zco1S_MxQvPlSwxbzPR7x2FUzWWU\"}\n    //             }\n    ).then(response => {\n      console.log(response.data);\n      if (!response.data.error) {\n        $('#username_error').html('');\n        $('#pwd_error').html('');\n        setToken(response.data.access);\n        alert(\"You Have Gotten Your token!\");\n        axios.post('http://localhost:8000/accounts/login/', {\n          // Data to be sent to the server\n          username: myForm.find('#username').val(),\n          password: myForm.find('#password').val()\n        }, {\n          headers: {\n            'Authorization': 'Bearer ' + token\n          }\n        });\n        setIsLogin(true);\n\n        //                    return <Navigate to='/profile'></Navigate>\n      } else {\n        $('#login_error').html(response.data.error);\n      }\n    }).catch(function (error) {\n      console.log(error.response);\n      if (error.response.status === 401) {\n        //unauthorized\n        $('#login_error').html(error.response.status + ' ' + error.response.statusText);\n      }\n    });\n  };\n  if (!isLogin) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login_overall\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"../users/UserAccount.html\",\n          className: \"form\",\n          id: \"form1\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"form__title\",\n            children: \"Log In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"User\",\n            className: \"input\",\n            id: \"username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            className: \"input\",\n            id: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"btn\",\n            type: \"submit\",\n            value: \"Sign In\",\n            onClick: loginHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"login_error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"registerOverlay\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/register\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            id: \"signIn\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 16\n    }, this);\n  } else {\n    navigate('/profile', {\n      state: {\n        token: token\n      },\n      replace: false\n    });\n  }\n}\n_s(LogIn, \"HoStmAA79TLwBqL3cR52P3dRLpQ=\", false, function () {\n  return [useNavigate];\n});\n_c = LogIn;\nvar _c;\n$RefreshReg$(_c, \"LogIn\");","map":{"version":3,"names":["$","axios","useNavigate","React","useState","jsxDEV","_jsxDEV","LogIn","_s","isLogin","setIsLogin","token","setToken","navigate","console","log","loginHandler","e","preventDefault","myForm","target","closest","post","username","find","val","password","then","response","data","error","html","access","alert","headers","catch","status","statusText","className","children","action","id","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onClick","href","state","replace","_c","$RefreshReg$"],"sources":["/Users/alberthuang/Documents/University/csc309-p2/Frontend/src/login.js"],"sourcesContent":["import './css/style1.css'\nimport './css/style2.css'\nimport './css/index.css'\nimport './css/bulma/bulma.css'\nimport './css/bulma/bulma.css.map'\nimport './css/bulma/bulma.min.css'\nimport './css/bulma/bulma-rtl.css'\nimport './css/bulma/bulma-rtl.css.map'\nimport './css/bulma/bulma-rtl.min.css'\nimport $ from 'jquery';\nimport axios from 'axios'\nimport {useNavigate} from 'react-router-dom'\nimport React, {useState} from 'react'\n\n\n\n\nexport default function LogIn(){\n\n    const [isLogin, setIsLogin] = useState(false)\n    const [token, setToken] = useState('')\n    const navigate = useNavigate()\n    console.log(\"loginlalala\", isLogin);\n\n    const loginHandler=(e)=>{\n\n        e.preventDefault()\n\n        console.log(\"handle login\")\n\n        var myForm = $(e.target.closest('form'))\n\n        axios\n            .post('http://localhost:8000/accounts/token/api/',\n            {\n                // Data to be sent to the server\n                username: myForm.find('#username').val(),\n                password: myForm.find('#password').val(),\n            }\n\n//            ,{\n//                headers: {\"Authorization\": 'Bearer '+\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjgyMDQ2MTc5LCJpYXQiOjE2ODIwNDU4NzksImp0aSI6IjI3NmZiMGZmNDA2ZTQzODA5ZDg2NzQxMzQyNzg1OWNlIiwidXNlcl9pZCI6MTd9._jgPlwjsSqEeN_9zco1S_MxQvPlSwxbzPR7x2FUzWWU\"}\n//             }\n             )\n            .then(response => {\n                console.log(response.data);\n\n                if(!response.data.error){\n                    $('#username_error').html('')\n                    $('#pwd_error').html('')\n\n                    setToken(response.data.access)\n\n                    alert(\"You Have Gotten Your token!\")\n\n                    axios\n                        .post('http://localhost:8000/accounts/login/',\n                        {\n                            // Data to be sent to the server\n                            username: myForm.find('#username').val(),\n                            password: myForm.find('#password').val(),\n                        },\n                        {headers: {'Authorization': 'Bearer '+token}}\n                        )\n\n                    setIsLogin(true);\n\n//                    return <Navigate to='/profile'></Navigate>\n                }else{\n                    $('#login_error').html(response.data.error)\n                }\n\n            })\n            .catch(function (error) {\n               console.log(error.response)\n               if(error.response.status === 401){\n                    //unauthorized\n                    $('#login_error').html(error.response.status + ' ' + error.response.statusText)\n               }\n\n            })\n    }\n\n    if(!isLogin){\n        return <div className='login_overall'>\n            <div className=\"login\">\n\t\t\t    <form action=\"../users/UserAccount.html\" className=\"form\" id=\"form1\">\n\t\t\t\t\t<h2 className=\"form__title\">Log In</h2>\n\t\t\t\t\t<input type=\"text\" placeholder=\"User\" className=\"input\" id='username'/>\n\t\t\t\t\t<input type=\"password\" placeholder=\"Password\" className=\"input\" id='password'/>\n\t\t\t\t\t<input className=\"btn\" type=\"submit\" value=\"Sign In\" onClick={loginHandler}></input>\n\t\t\t\t</form>\n\t\t\t\t<p id='login_error'></p>\n\t\t\t</div>\n            <div className=\"registerOverlay\">\n                <a href=\"/register\"><button className=\"btn\" id=\"signIn\">Register</button></a>\n           </div>\n\n           </div>\n    }else{\n        navigate('/profile', { state: {token: token}, replace: false })\n    }\n\n}\n"],"mappings":";;AAAA,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,2BAA2B;AAClC,OAAO,2BAA2B;AAClC,OAAO,2BAA2B;AAClC,OAAO,+BAA+B;AACtC,OAAO,+BAA+B;AACtC,OAAOA,CAAC,MAAM,QAAQ;AACtB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,WAAW,QAAO,kBAAkB;AAC5C,OAAOC,KAAK,IAAGC,QAAQ,QAAO,OAAO;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAKrC,eAAe,SAASC,KAAKA,CAAA,EAAE;EAAAC,EAAA;EAE3B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGN,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAMS,QAAQ,GAAGX,WAAW,EAAE;EAC9BY,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEN,OAAO,CAAC;EAEnC,MAAMO,YAAY,GAAEC,CAAC,IAAG;IAEpBA,CAAC,CAACC,cAAc,EAAE;IAElBJ,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAE3B,IAAII,MAAM,GAAGnB,CAAC,CAACiB,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IAExCpB,KAAK,CACAqB,IAAI,CAAC,2CAA2C,EACjD;MACI;MACAC,QAAQ,EAAEJ,MAAM,CAACK,IAAI,CAAC,WAAW,CAAC,CAACC,GAAG,EAAE;MACxCC,QAAQ,EAAEP,MAAM,CAACK,IAAI,CAAC,WAAW,CAAC,CAACC,GAAG;IAC1C;;IAEZ;IACA;IACA;IAAA,CACc,CACDE,IAAI,CAACC,QAAQ,IAAI;MACdd,OAAO,CAACC,GAAG,CAACa,QAAQ,CAACC,IAAI,CAAC;MAE1B,IAAG,CAACD,QAAQ,CAACC,IAAI,CAACC,KAAK,EAAC;QACpB9B,CAAC,CAAC,iBAAiB,CAAC,CAAC+B,IAAI,CAAC,EAAE,CAAC;QAC7B/B,CAAC,CAAC,YAAY,CAAC,CAAC+B,IAAI,CAAC,EAAE,CAAC;QAExBnB,QAAQ,CAACgB,QAAQ,CAACC,IAAI,CAACG,MAAM,CAAC;QAE9BC,KAAK,CAAC,6BAA6B,CAAC;QAEpChC,KAAK,CACAqB,IAAI,CAAC,uCAAuC,EAC7C;UACI;UACAC,QAAQ,EAAEJ,MAAM,CAACK,IAAI,CAAC,WAAW,CAAC,CAACC,GAAG,EAAE;UACxCC,QAAQ,EAAEP,MAAM,CAACK,IAAI,CAAC,WAAW,CAAC,CAACC,GAAG;QAC1C,CAAC,EACD;UAACS,OAAO,EAAE;YAAC,eAAe,EAAE,SAAS,GAACvB;UAAK;QAAC,CAAC,CAC5C;QAELD,UAAU,CAAC,IAAI,CAAC;;QAEpC;MACgB,CAAC,MAAI;QACDV,CAAC,CAAC,cAAc,CAAC,CAAC+B,IAAI,CAACH,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC;MAC/C;IAEJ,CAAC,CAAC,CACDK,KAAK,CAAC,UAAUL,KAAK,EAAE;MACrBhB,OAAO,CAACC,GAAG,CAACe,KAAK,CAACF,QAAQ,CAAC;MAC3B,IAAGE,KAAK,CAACF,QAAQ,CAACQ,MAAM,KAAK,GAAG,EAAC;QAC5B;QACApC,CAAC,CAAC,cAAc,CAAC,CAAC+B,IAAI,CAACD,KAAK,CAACF,QAAQ,CAACQ,MAAM,GAAG,GAAG,GAAGN,KAAK,CAACF,QAAQ,CAACS,UAAU,CAAC;MACpF;IAEH,CAAC,CAAC;EACV,CAAC;EAED,IAAG,CAAC5B,OAAO,EAAC;IACR,oBAAOH,OAAA;MAAKgC,SAAS,EAAC,eAAe;MAAAC,QAAA,gBACjCjC,OAAA;QAAKgC,SAAS,EAAC,OAAO;QAAAC,QAAA,gBAC3BjC,OAAA;UAAMkC,MAAM,EAAC,2BAA2B;UAACF,SAAS,EAAC,MAAM;UAACG,EAAE,EAAC,OAAO;UAAAF,QAAA,gBACtEjC,OAAA;YAAIgC,SAAS,EAAC,aAAa;YAAAC,QAAA,EAAC;UAAM;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAK,eACvCvC,OAAA;YAAOwC,IAAI,EAAC,MAAM;YAACC,WAAW,EAAC,MAAM;YAACT,SAAS,EAAC,OAAO;YAACG,EAAE,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAE,eACvEvC,OAAA;YAAOwC,IAAI,EAAC,UAAU;YAACC,WAAW,EAAC,UAAU;YAACT,SAAS,EAAC,OAAO;YAACG,EAAE,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAE,eAC/EvC,OAAA;YAAOgC,SAAS,EAAC,KAAK;YAACQ,IAAI,EAAC,QAAQ;YAACE,KAAK,EAAC,SAAS;YAACC,OAAO,EAAEjC;UAAa;YAAA0B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAS;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAC9E,eACPvC,OAAA;UAAGmC,EAAE,EAAC;QAAa;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAK;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACnB,eACGvC,OAAA;QAAKgC,SAAS,EAAC,iBAAiB;QAAAC,QAAA,eAC5BjC,OAAA;UAAG4C,IAAI,EAAC,WAAW;UAAAX,QAAA,eAACjC,OAAA;YAAQgC,SAAS,EAAC,KAAK;YAACG,EAAE,EAAC,QAAQ;YAAAF,QAAA,EAAC;UAAQ;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QAAS;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAI;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAC5E;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAEA;EACb,CAAC,MAAI;IACDhC,QAAQ,CAAC,UAAU,EAAE;MAAEsC,KAAK,EAAE;QAACxC,KAAK,EAAEA;MAAK,CAAC;MAAEyC,OAAO,EAAE;IAAM,CAAC,CAAC;EACnE;AAEJ;AAAC5C,EAAA,CAtFuBD,KAAK;EAAA,QAIRL,WAAW;AAAA;AAAAmD,EAAA,GAJR9C,KAAK;AAAA,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}